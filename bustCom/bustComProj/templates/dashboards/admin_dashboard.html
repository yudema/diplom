{% extends "bustComProj/base.html" %}

{% block title %}–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞{% endblock %}

{% block content %}
    <h1>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h1>
    <ul>
        <li><a href="{% url 'manage_users' %}">üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</a></li>
        <li><a href="{% url 'upload_courses' %}">üìÇ –ó–∞–≥—Ä—É–∑–∫–∞ –∫—É—Ä—Å–æ–≤</a></li>
        <li><a href="{% url 'monitor_activity' %}">üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</a></li>
    </ul>

    <h2>üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
    <canvas id="dashboardChart"></canvas>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        fetch("{% url 'get_dashboard_data' %}")
            .then(response => response.json())
            .then(data => {
                var ctx = document.getElementById('dashboardChart').getContext('2d');
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ["–ö—É—Ä—Å—ã", "–¢–µ—Å—Ç—ã", "–ü—Ä–æ–π–¥–µ–Ω–æ –ª–µ–∫—Ü–∏–π", "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏"],
                        datasets: [{
                            label: "–û–±—â–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å",
                            data: [data.courses, data.tests, data.lectures_completed, data.users],
                            backgroundColor: ['#ff00ff', '#00ffcc', '#ffcc00', '#ff6600'],
                        }]
                    },
                    options: { responsive: true, scales: { y: { beginAtZero: true } } }
                });
            });
    </script>
{% endblock %}


